# Домашнее задание к занятию «Репликация и масштабирование. Часть 2» Волкивский Андрей

Задание 1

Опишите основные преимущества использования масштабирования методами: активный master-сервер и пассивный репликационный slave-сервер; master-сервер и несколько slave-серверов; Дайте ответ в свободной форме.

Решение 1

1. Активный master-сервер и пассивный репликационный slave:

В этой схеме, у нас есть основной (master) сервер, на который идут все операции записи (запись, обновление, удаление) и (slave) сервер — реплика, обновляется автоматически через механизм репликации и в обычном режиме просто «подстраивается» под master. К преимуществам в первыю очередь относим - отказоустойчивость, если master «упал», данные всё ещё доступны на slave, который можно быстро переключить в режим работы master, минимизируя простой. Еще к плюсам можно отнести разделение потоков: запись — только на мастер, чтение — перекидываем на slave. Так же во многих дополнительных источниках по этой теме относят к преимуществам этой схемы - резервное копирование, хотя преподаватель в лекции категорически отвергает этот пункт. Скорее соглашусь с ним и резервное копирование будем настравать другими инструментами, предназначеннымии тоглько для этого.

2. В схеме Master-сервер и несколько slave-серверов: 

Такая схема является развитием первой. Здесь один Master-сервер реплицирует данные на 1, 2, 3 и на любое множество Slave-серверов, к которым обычно направляют запросы на чтение. 

К преимуществам отнесем масштабируемость по чтению. Например, у нас 3 слейва — мы можем настроить балансировщик и распределять нагрузку ну а Master остаётся — только для записи. 

Второй момент, повышенная отказоустойчивость для операций чтения: если один из Slave-серверов выходит из строя, нагрузку на чтение можно перенаправить на другие работоспособные Slave'ы. 

Можно отметить так же геораспределение нагрузки: Slave можно развернуть в другом дата-центре или регионе — например, один в Москве, другой во Владивостоке — чтобы у пользователей с Дальнего Востока не было задержек при получения ответа на запрос.

Обе схемы — основа для отказоустойчивых, масштабируемых и надёжных систем. В первом случае — простота и надёжность, во втором — производительность и гибкость. Для тестовых проектов, либо на старте проекта, обычно хватает одной пары master-slave. Для крупных планируем распределённые структуры, актуально для больших предприятий, под реальную нагрузку.

Задание 2
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

пользователи,
книги,
магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.

Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.

Решение 2

План шардирования базы данных (горизонтальный и вертикальный):

Чтоб обеспечить высокую доступность и масштабируемость системы представим архитектуру горизонтального и вертикального шардирования БД, состоящей из трех таблиц:

Пользователи (users)

Книги (books)

Магазины (shops)

Горизонтальный шардинг
Применяется к таблице пользователей:

Таблица "пользователи" делится на части по уникальному признаку (например, user_id).

Каждый шард содержит диапазон user_id или результат деления по хешу.

Данные одного пользователя полностью содержатся в одном шарде.

Каждый шард размещается на отдельном сервере базы данных.

Для отказоустойчивости возможна настройка read-only реплик.

Вертикальный шардинг
Применяется к таблицам книг и магазинов:

Таблицы "книги" и "магазины" выделяются на разные физические или логические базы данных.

Таблица "книги" размещается на одном выделенном сервере, таблица "магазины" — на другом.

Это позволяет разгружать операции различных бизнес-направлений между разными серверами.

<img width="1614" height="999" alt="image" src="https://github.com/user-attachments/assets/98678f72-9b42-44f7-876b-e63ca387eb49" />

Описание блок-схемы:

Горизонтальный шардинг выполняется по таблице пользователей: данные распределены между двумя серверами.

Вертикальный шардинг реализован выделением таблиц книг и магазинов на отдельные серверы.

Шардинг-роутер направляет запросы к соответствующему серверу.

Каждый сервер работает в режиме read-write с возможными read-only репликами.

Такая схема позволит эффективно масштабировать базу данных по разным измерениям запросов и объему данных, снижая нагрузку на отдельный сервер и повышая общую производительность системы.


